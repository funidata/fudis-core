import { Meta } from "@storybook/blocks";

<Meta title="Documentation/Development/Tooling/Testing Local Changes in Application" />

# Testing Local Changes in Application

Sometimes you need to test your local changes straight away in the application. The Fudis Core package may be either a symlinked workspace or a packaged tarball.
Instructions cover both NPM and Yarn package managers.

In some projects you might have to do some additional configuration to enable symlinks. Check your project configurations if problems occur.

**Table of Contents**

1. [Testing with Symlink](#testing-with-symlink)
2. [Testing with Tarball](#testing-with-tarball)

## Testing with Symlink

### NPM

1. Navigate to **core** directory. There you have two options for creating the build.
   - **Option 1**: Command for building the library that does not rebuild the library after changes to code: `npm run build:dist`.
   - **Option 2**: If you want to develop and test at the same time, run `npm run build:dist:watch`. This starts up Nodemon daemon that builds the dist-folder every time you make changes to any scss-files.
2. Go to the **core/dist** directory and run `npm link` that creates a global symlink to the Fudis Core package, making it available system-wide.
3. Then navigate to your project where you want to link the Fudis core package. The directory that contains the node_modules folder containing the project dependencies is the correct place to execute linking. In this project directory run `npm link @funidata/fudis-core`
4. When you want to unlink the package from your project, run the command `npm unlink @funidata/fudis-core`. This is done in the same directory in your consuming project, where you linked the package.
5. If you want to remove the global symlink, go back to the **core/dist** folder and run `npm unlink -g`

### Yarn

These instructions are for Yarn v4. If you are using any other version, please check the corresponding documentation to see how symlinking is done.

1. Navigate to **core** directory. There you have two options for creating the build.
   - **Option 1**: Command for building the library that does not rebuild the library after changes to code: `npm run build:dist`.
   - **Option 2**: If you want to develop and test at the same time, run `npm run build:dist:watch`. This starts up Nodemon daemon that builds the dist-folder every time you make changes to any scss-files.
2. Navigate to your project where you want to use the Fudis Core-package. The directory that contains the node_modules folder containing the project dependencies is the correct place to execute linking.
3. In this project directory run `yarn add @funidata/fudis-core@link:./{your-path-to-core-directory}/core/dist`

## Testing with Tarball

1. Navigate to **core** directory.
2. Build the library: `npm run build:dist`. New changes require rebuilding the library again.
3. Go to the **core/dist** directory and run `npm pack`. This will create a tarball file `funidata-fudis-core-{version-number}.tgz` in that current directory.
4. Navigate to your project where you want to use the Fudis Core package. The directory that contains the node_modules folder containing the project dependencies is the correct place to execute linking.
5. In this project directory run the following:
   - **with NPM** `npm install ./{path-to-your-local-tarball-file}`.
   - **with Yarn** `yarn add ./{path-to-your-local-tarball-file}`.
